<div class="p-4">
  <div class="mb-4">
    <h2>Каталог фильмов</h2>
    <button pButton label="Добавить фильм" icon="pi pi-plus" class="p-button-success" (click)="onAddFilm()"></button>
  </div>

  <div>
    <div *ngFor="let film of films" class="mb-4">
      <p-card [header]="film.title" [subheader]="film.genre + (film.year ? ' | ' + film.year : '')">
        <div>
          <img
            *ngIf="film.image"
            [src]="film.image"
            alt="film image"
            style="width: 100px; object-fit: cover; border-radius: 6px;"
          />

          <div>
            <p><strong>Режиссёр:</strong> {{ film.director }}</p>
            <p><strong>Актёры:</strong> {{ film.actors.join(', ') }}</p>
            <p *ngIf="film.annotation">{{ film.annotation }}</p>
          </div>
        </div>

        <ng-template pTemplate="footer">
          <p-menu #menu [popup]="true" [model]="menuItems"></p-menu>
          <button
            pButton
            icon="pi pi-ellipsis-v"
            class="p-button-rounded p-button-text p-button-plain"
            (click)="activeFilm = film; menu.toggle($event)"
            title="Действия"
          ></button>
        </ng-template>
      </p-card>
    </div>
  </div>
</div>

<!-- Диалог с формой добавления/редактирования -->
<app-film-form
  [visible]="showForm"
  [film]="selectedFilm"
  (save)="onSave($event)"
  (close)="showForm = false"
></app-film-form>
